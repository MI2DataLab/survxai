install.packages("randomForestSRC")
install.packages("survreg")
install.packages("survival")
load("C:/Users/Aleksandra Grudziaz.DESKTOP-1PK02R5/Documents/MI2 DataLab prace/survXAI/data_model.rda")
View(data_model)
load("C:/Users/Aleksandra Grudziaz.DESKTOP-1PK02R5/Downloads/daneCOI(1).rda")
colnames(daneCOI) <- make.names(colnames(daneCOI))
daneCOI<- daneCOI[which(!daneCOI$F5.Stadium..uicc.2009. %in% c("brak","brak danych")),]
daneCOI$F5.Stadium..uicc.2009. <- factor(daneCOI$F5.Stadium..uicc.2009.)
library(survival)
library(survminer)
library(lubridate)
followup <- ymd(daneCOI$Data.zgonu)
followup[is.na(followup)] <- ymd("2016-12-31")
daneCOI$obserwacja <- followup - ymd(daneCOI$F1.Data.rozpoczecia.leczenia)
daneCOI$wiek <- as.numeric((ymd(daneCOI$F1.Data.rozpoczecia.leczenia) - ymd(daneCOI$P.Data.urodzenia))/365.25)
View(daneCOI)
daneModelowanie <- daneCOI[,c(2,3,4,6,7,8, 11,12,14,15,21,23,130,131,132)]
daneModelowanie = filter(daneModelowanie, wiek>0)
daneModelowanie = dplyr::filter(daneModelowanie, wiek>0)
daneModelowanie = dplyr::filter(daneModelowanie, obserwacja>0)
save(daneModelowanie, file="daneModelowanie.rda")
library(randomForestSRC)
library(survival)
model_coxph <- coxph(Surv(obserwacja/365, F10.zyje == "NIE")~., data=daneModelowanie)
View(daneModelowanie)
model_coxph <- coxph(Surv(obserwacja/365, F10.zyje == "NIE")~ P.Plec+F1.Palenie.papierosow+F1.Azbest+F1.Rodzina.nowotwory+F1.Paczkolata, data=daneModelowanie)
model_coxph <- coxph(Surv(obserwacja/365, F10.zyje == "NIE")~ P.Plec+F1.Palenie.papierosów+F1.Azbest+F1.Rodzina.nowotwory+F1.Paczkolata, data=daneModelowanie)
model_randomForest <- rfsrc(Surv(obserwacja/365, F10.zyje == "NIE")~ P.Plec+F1.Palenie.papierosów+F1.Azbest+F1.Rodzina.nowotwory+F1.Paczkolata, data=daneModelowanie)
daneModelowanie$F1.Rodzina.nowotwory <- as.factor(daneModelowanie$F1.Rodzina.nowotwory)
model_coxph <- coxph(Surv(obserwacja/365, F10.zyje == "NIE")~ P.Plec+F1.Palenie.papierosów+F1.Azbest+F1.Rodzina.nowotwory+F1.Paczkolata, data=daneModelowanie)
model_randomForest <- rfsrc(Surv(obserwacja/365, F10.zyje == "NIE")~ P.Plec+F1.Palenie.papierosów+F1.Azbest+F1.Rodzina.nowotwory+F1.Paczkolata, data=daneModelowanie)
traceback()
data(pbc)
View(pbc)
data(pbc, package="randomForestSRC")
View(pbc)
model_randomForest <- rfsrc(Surv(obserwacja/365, F10.zyje == "NIE")~ P.Plec+F1.Palenie.papierosów+F1.Azbest+F1.Rodzina.nowotwory+F1.Paczkolata, data=daneModelowanie, nsplit = 10, ntree = 150)
data(wihs, package = "randomForestSRC")
View(wihs)
rfsrc()
rfsrc
model_randomForest <- rfsrc(Surv(obserwacja/365, F10.zyje == "NIE")~ P.Plec+F1.Palenie.papierosów+F1.Azbest+F1.Rodzina.nowotwory+F1.Paczkolata, data=daneModelowanie, nsplit = 10, ntree = 150)
model_coxph <- survreg(Surv(obserwacja/365, F10.zyje == "NIE")~ P.Plec+F1.Palenie.papierosów+F1.Azbest+F1.Rodzina.nowotwory+F1.Paczkolata, data=daneModelowanie)
model_survreg <- survreg(Surv(obserwacja/365, F10.zyje == "NIE")~ P.Plec+F1.Palenie.papierosów+F1.Azbest+F1.Rodzina.nowotwory+F1.Paczkolata, data=daneModelowanie)
model_randomForest <- rfsrc(Surv(obserwacja/365, F10.zyje == "NIE")~ P.Plec+F1.Palenie.papierosów+F1.Azbest+F1.Rodzina.nowotwory+F1.Paczkolata, data=daneModelowanie, nsplit = 10, ntree = 150)
View(model_coxph)
model_coxph <- coxph(Surv(obserwacja/365, F10.zyje == "NIE")~ P.Plec+F1.Palenie.papierosów+F1.Azbest+F1.Rodzina.nowotwory+F1.Paczkolata, data=daneModelowanie)
View(model_survreg)
plot.survival(model_coxph)
plot(model_coxph)
model_coxph <- coxph(Surv(obserwacja/365, F10.zyje == "NIE")~ P.Plec+F1.Palenie.papierosów+F1.Azbest+F1.Rodzina.nowotwory+F1.Paczkolata, data=daneModelowanie)
model_survreg <- survreg(Surv(obserwacja/365, F10.zyje == "NIE")~ P.Plec+F1.Palenie.papierosów+F1.Azbest+F1.Rodzina.nowotwory+F1.Paczkolata, data=daneModelowanie)
plot.coxph(model_coxph)
library(survival)
plot.coxph(model_coxph)
plot(survfit(model_coxph))
install.packages("Survminer")
install.packages("survminer")
library(survminer)
getwd()
setwd("C:/Users/Aleksandra Grudziaz.DESKTOP-1PK02R5/Documents/Github/survxai")
